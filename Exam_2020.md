# Eksamensoppgaver 2020

## Oppgave 1

### Which of the following situations may lead to a loss of packets in a packet-switched network

1. A hosts informs a packet-switch that it decided not to transmit the packet anyway
2. Buffers overflow because too many packes arrive for transmission on a communication link
3. Interference of signals on a communication link causing some of the transmitted bits in the packet to be changed

**Correct:** 2. and 3.

### What is traffic intensity a measure of?

1. The amount of bits/second presented to a link for transmission
2. The amount of bits received on an incomring communication link
3. A relation between the amount of bits presented per time unit for transmission on the communication link and the rate with which the bits can be transmitted

**Correct:** 3.

### What does it mean that the transport layer provides a reliable data transfer service

1. The receiver may only receive some of the data sent by the sender
2. The data sent by a sender equals the data received by the receiver and the order is preserved
3. The data sent by a sender is equal to the data received by the receiver

**Correct:** 2.

### What is the role of the forwarding function executed at the network layer

1. To compute the least cost routes(paths) in the network
2. To transfer datagrams from incoming links to the appropriate outgoing link
3. To provide diagnostic information in case of network errors

**Correct:** 2.

### What is the purpose of the Address Resolution Protocol (ARP)

1. To configure a network interface with an IP address
2. To configure a network card with a link-layer(MAC) address
3. To map an IP address into the corresponding link-layer(MAC) address

**Correct:** 3.

### Client-centric consistency protocols are about

1. Making sure that there is a systemwide consistent view on a data store
2. Providing consistency for a single client that accesses different replicas
3. bot 1. and 2.

**Correct:** 2.

### A replicated-write protocol which is based on majority voting is called

1. Coherence-based protocol
2. Local-write protocol
3. Remote-write protocol
4. Quorum-based protocol

**Correct:** 4.

### A key reason to use a probabilistic flooding model in flooding-based multicasting is to

1. Create a structured overlay network
2. Increase the number of messages to ensure reliability
3. Reduce the number of messages in the network

**Correct:** 3.

### An example of location independent name is

1. An IP address
2. A domain name
3. A telephone number

**Correct:** 2.

### Which of the following is an example of cloud computing service models?

1. Business as a service
2. Software as a service
3. Utility as a service

**Correct:** 2.

## Oppgave 2

related to project 1 on socket programming and RPC middleware

### List the three protocol layers that were implemented in the project and explain briefly how they are related

IoT application layer, RPC layer and Messaging layer. The messaging layer was on top of TCP and was used to implement the RPC layer for remote-procedure calls. The RPC layer was then used byt the IoT application layer to implement the sensor-display-controller IoT system at the application layer

### The java socket API and the TCP transport service were used in the implementation. What two elements are being used to identify a socket (communication endpoint) at the transport layer of the TCP/IP protocol stack

A socket represents a communication endpoint and is identified using a port number and an IP address

### The messages exchanged in task 1 of the project has a fixed length of 128 bytes. Explain briefly the purpose of the first 8 bits in the messages and why they are needed

The first byte is interpreted as an int to tell how many of the subsequent 127 bytes is payload data. This is needed because the messages have a fixed length of 128 byte, leaving room for 127 bytes of data. But not all messages have 127 bytes of data.

### In task 2 of the project: When the server receives an RPC request from a client, how does the server identify the method to be invoked

The server side uses the identifier sent with the RPC request to look up the method to be invoked

**Correct:** The first byte of an RPC request message which is carried as a payload data in the fixed-size message at the messaging layer is used to specify the number of the RPC method. This number is then used to lookup the method in the RPC table on the RPC server.

**Correct but made correct:** The first byte in RPC request message which is carried as a payload data is used to specify the number of the RPC method.

### Sketch briefly how the message format in Task 1 of the project could be extended such that it would be possibly to arbitrarily long messages

The problem is similar to fragmentation with the exception that the individual parts cannot be reordered because messaging takes place over TCP. Hence, the first bit of the byte specifying payload length could be used to indicate whether this message is the last message of a longer message or not. This would leave 7 bits to specify payload length between 0 and 127.

## Oppgave 3

### Why are layering and protocol stacks used for implementation of data networks

Layering and protocol stacks are used to break up the complexity of data networks in smaller subproblems. This makes it possible to integrate different network technologies in a network-of-networks such that application can be developed without having to consider the complex internal structure of the data network. It also makes it possible to replace protocols at a given layer without having to make changes to the layer above or under.

### What is the difference between a protocol and a service

Protocol constitutes the rules that are implemented at a given layer in the protocol stack and governs the communication between entities at that layer. A protocol implements the service provided by the layer above to the layer above in the protocol stack. Protocol can be seen as implementing a service

### The TCP/IP protocol stack is used to construct a network of networks (the internet). All network cards have a link-layer (MAC) address and all network interfaces are configured with an IP network-layer address. Why are IP addresses used - would it not suffice to just use link-layer addresses

Link-Layer (MAC) addresses do not have any hierarchical structure as IP addresses have. Hence, use of link-layer addresses would not allow for route aggregation which is important for scalability of forwarding tables in the internet. Also, different link-layers may have different format of addresses which would prevent a uniform address space.

## Oppgave 4

### Explain briefly what service the DNS system implements, and the function of the fields: Flags, Questions and Answers

DNS system constitute a distributed database that makes it possible to map hostnames (e.g. google.com) to an IP address. In a typical scenario, Flags are used to indicate whether the message is a query or a reply message, Questions are to hold host names that are to be mapped to IP addresses, and answers will contain IP addresses

### Describe briefly how the DNS protocol works by outlining a typical exchange of messages between a DNS client adn a DNS server

The DNS protocol typically operates by the client sending a DNS query containing a host name to a DNS server. When the DNS server receives the query, then it may either iteratively or recursively contact other DNS servers until it eventually returns a DNS reply to the DNS client containing the IP address of the hostname that was to be resolved

### Assume that a DNS client has sent multiple DNS queries and receives a DNS reply. How can the client find out which DNS query that the DNS reply matches

The identification field of the DNS message is used to specify an identifier that can be used to match queries and replies

### The DNS primarily uses UDP as a transport service. Why is UDP and not TCP used to send DNS requests and replies

The DNS protocol typically involves a request and a reply after which the communication is completed. The overhead of establishing a TCP connection would therefore be relatively high compared to the amount of data that needs to be exchanged. In case a DNS client does not receive a reply because a DNS message was lost, the DNS client can simply retransmit the query

## Oppgave 5

### Least cost path from R2-R4

R2->R3->R4
1+2 = 3

### Show the steps performed by the loop part of the algorithm by adding a row to the above table for each iteration of the algorithm. Each row must specify the value of N', and the values of D(v) for each node v

|Step | N' | D(R1),p(R1) | D(R3),p(R3) | D(R4),p(R4)|
|:---: | :---: | :---: | :---: | :---: |
|0    |{R2}| 7,R2        | 1,R2        | 5,R4       |
|1(w=R3)|{R2,R3}|7,R2    | 1,R2        | 3,R3       |
|2(w=R4)|{R2,R3,R4}|7,R2 | 1,R2        | 3,R3       |
|3(w=R1)|{R2,R3,R4,R1}|7,R2| 1,R2      | 3,R3       |

### Show how the information computed in last task can be used to construct the forwarding table for R2. Each entry in the forwarding table must consist of a destination router and a next-hop router

For a given destination router we use the information provided by p(v) to find the least cost route back to R2

* Destination R4: p(R4) = R3 and p(R3) = R2, so next-hop from R2 is R3
* Destination R3: p(R3) = R2. Next hop is R3(direct)
* Destination R1: p(R1) = R2. Next hop is R1(direct)

## Oppgave 6
Consider the following IP network consisting of hosts H1-H6 and routers R1-R4. The integers 1,2 and 3 around R1 denote network interface identifiers. Link-layer and IP addresses are specified for some of the network interfaces of hosts and routers

### Assume that a new host H0 arrives at the local area network with H1 and H2. What protocol caan H0 use to automatically configure its network interface with an IP

Dynamic Host Configuration Protocol (DHCP) can be used to obtain an IP address

### Assume that host H0 obtained the IP address 132.200.1.4 and is to send a IP datagram to H5. As the first hop, the IP datagram needs to be sent in a frame from H0 to H1. What IP address should H0 specify in the ARP query that it sends in order to obtain the link-layer address of interface 1 of R1?

As the IP datagram is to be encapsulated into a frame and sent to interface 1 of R1 we need the link-layer address corresponding to 132.200.1.3.

### Assume that a IP datagram is sent from H0 via R1,R3,R4 to H5. How many times will the datagram be encapsulated into a frame on the route from H0 to H5 and how many times will it be decapsulated?

* The datagram will be encapsulated into a frame at H0, R1, R3, R4. 4 times in total.
* The datagram will be decapsulated from a frame at R1, R3,R4 and H5. 4 times here as well

### What 32-bit pattern does the IP address 221.198.1.5 corresponds to?

11011101.11000110.00000001.00000101

### Assume that the forwarding table of R1 contains the following entries

* 11011101 11000110 00000001 00000101
  * Next-hop interface: 2
* 11011101 11000110 00000001 00000110
  * Next-hop interface: 3
* Otherwise
  * Next-hop inteface: 1

### at which interface will router R1 forward datagrams with the following IP destination addresses

* 221.198.1.5 = 11011101 11000110 00000001 00000101 (interface 2)
* 221.198.1.6 = 11011101 11000110 00000001 00000110 (interface 3)

### Assume that the subnet containing hosts H5 and H6 has been given the address block 221.198.1/24. What interval of IP addresses does this block span

from 221.198.1.0 to 221.198.1.255

### How could the first two entries in the forwarding table be replaced with a single entry such that all datagrams for the network containing H5 and H6 will be sent via R2?

The addresses in the address block 221.198.1/24 can be described with the 24-bit address prefix: 221.198.1 = 11011101 11000110 00000001

As routing is based on longest prefix matching, we can replace the two entries with the entry:

* Destination = 11011101 11000110 00000001
* Next hop interface = 2

Using the address prefix 11011101.11000110.0000001.000001/30 or 11011101.11000110.00000001.00000/29 are also possible options since they make up the last two and three bits.

## Oppgave 7

The figure below shows the processes A, B and C that communicate using synchronous remote procedure call (RPC). A and B are clients, while C is a server. Use the figure to answer questions a and b

### Explain briefly how process B can be exchanged to an asynchronous RPC server

B wants to avoid blocking and be able to process many requests - i.e. a concurrent server. For that we need to use multithreading and (optionally) a client callback function registered on the server side. B can acknowledge the request to the client and hands-off the request from A or C to a new thread. When the request has been processed, the thread unblocks and trigger the callback function sending reply back to the client

### Explain briefly how process A and C can be changed to an asynchronous RPC client

The main concept here is that we do not want the clients A or C to block while waiting for the reply from B. Similar to a) we need to use multithreading and (optionally) callback functions from the client side. A can register a callback function with B, use/spawn a new thread each time a request is to be sent to the server (B) while the program continues on the main thread. B can send its reply to A using callback function

## Oppgave 8

Overlay network formed by processes A-E for multicasting messages. Process C is the root of the multicast tree and the path of the overlay network is C-B-A-D-E. The physical links are formed by five routers (Ra, Rb, Rc, Rd and Re). The numbers show the cost (delay) of sending messages across the physical links(routers)

### Compute the overlay network path and delay in the multicast tree when a message is multicast from

* C to E
  * C -> Rc -> Rb -> B -> Rb -> Ra -> A -> Ra -> Re -> Rd -> D -> Rd -> Re -> E
  * 1+40+1+1+25+1+1+100+30+1+1+30+1 = 233
* C to D
  * C -> Rc -> Rb -> B -> Rb -> Ra -> A -> Ra -> Re -> Rd -> D
  * 1+40+1+1+25+1+1+100+30+1 = 201

### Compute the stretch/relative delay penalty when a message is multicast from C to E provided that the best path (least cost) will be used by the underlying physical routers to route message from C to E

* Physical delay = 1+10+30+1 = 42
* RDP = 233/42 = 5.55

### Assume that the tree is modified such that path A -> D is removed and a new path A -> E is created resulting in new path beeing C -> B -> A -> E -> D. Compute the RDP to route message from C to E. Which tree is more efficient - original or modified. Explain in one sentence

* C -> Rc -> Rb -> B -> Rb -> Ra -> A -> Ra -> Re -> E
  * 1+40+1+1+25+1+1+100+1 = 171
* Physical
  * 1+10+30+1 = 42
* RDP
  * 171/42 = 4.07
  
Modified route is more effiecient. Cost to route a message is 4x the physical cost in the modified, compared to 5x in the original tree.

## Oppgave 9

MySQL uses lamport clocks to provide totally ordered messages in their five high availability server clusters represented by processes p1 - p5. Consider the following sequence of events at the 5 processes where Si and Ri are corresponding send and receive events for i=1-5 and the events (a-k) are concurrent events

* p1
  * a s1 r3 b
* p2
  * r1 s2 c s4
* p3
  * d r2 e s3 f
* p4
  * r4 g h s5 i
* p5
  * r5 j k

### Compute the lamport clock values for all the events at these five processes

Clock Ci = 0

1. Ci <- Ci + 1                             : send or local event
2. Cj <- max(m(c), Pi(j)). Then do rule 1   : receive event

* P1
  * a: 1
  * s1: 2
  * r3: 8
  * b: 9
* P2
  * r1: 3
  * s2: 4
  * c: 5
  * s4: 6
* P3
  * d: 1
  * r2: 5
  * e: 6
  * s3: 7
  * f: 8
* P4
  * r4: 7
  * g: 8
  * h: 9
  * s5: 10
  * i: 11
* P5
  * r5: 11
  * j: 12
  * k: 13

Essensielt så går vi bare gjennom alle prosessene, starter i de øverste prosessene som har ein event og fortsetter til man receiver. Då velger man største verdien (klokka i den prosessen eller fra receiving og tar + 1)

### Consider the following sequence of events at the 4 processes. Compute vector clock values for all the events at these four processes

* P1
  * a: [1, 0, 0, 0]
  * s1: [2, 0, 0, 0]
  * r3: [3, 2, 4, 0]
  * b: [4, 2, 4, 0]
* P2
  * r1: [2, 1, 0, 0]
  * s2: [2, 2, 0, 0]
  * c: [2, 3, 0, 0]
  * s4: [2, 4, 0, 0]
* P3
  * d: [0, 0, 1, 0]
  * r2: [2, 2, 2, 0]
  * e: [2, 2, 3, 0]
  * s3: [2, 2, 4, 0]
  * r5: [2, 4, 5, 4]
* P4
  * r4: [2, 4, 0, 1]
  * f: [2, 4, 0,2]
  * g: [2, 4, 0, 3]
  * s5: [2, 4, 0, 4]
  * h: [2, 4, 0, 5]

### What information does the vector clock [2, 4, 0, 1] at p4 give?

[2, 4, 0, 1] at p4 means that 2 events happened at p1, 4 at p2 at which p4 probably depends.(OR, p4 probably has a causal relationship to the 2 events in p1 and the 4 events in p2)

## Oppgave 10

Distributed hash tables.

A ring with m = 5 bit is used. Four server replicas (5,13,22,26) are organized in the ring. Each file is replicated 5 times and distributed in the replicas. Finger table for each server uses five entries computed as succ(n+2^(i-1)) where n is the node identifier and i is the finger table index

### What is the address size of the ring?

2^5 = 32{0,1,2,3,...,31}

### Compute the finger tables for each of the four server replicas (show computation steps)

Server = 5

i = 1: succ(5+2^(1-1))
i = 2: succ(5+2^(1-2))
i = 3: succ(5+2^(1-3))
i = 4: succ(5+2^(1-4))
i = 5: succ(5+2^(1-5))

Server = 13

i = 1: succ(13+2^(1-1))
i = 2: succ(13+2^(1-2))
i = 3: succ(13+2^(1-3))
i = 4: succ(13+2^(1-4))
i = 5: succ(13+2^(1-5))

Server = 22

i = 1: succ(22+2^(1-1))
i = 2: succ(13+2^(1-2))
i = 3: succ(13+2^(1-3))
i = 4: succ(13+2^(1-4))
i = 5: succ(13+2^(1-5))

Server = 26

i = 1: succ(26+2^(1-1))
i = 2: succ(13+2^(1-2))
i = 3: succ(13+2^(1-3))
i = 4: succ(13+2^(1-4))
i = 5: succ(13+2^(1-5))
